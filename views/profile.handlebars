<!DOCTYPE html>
<html lang="en">

<head>

    <style>
        /* The Modal (background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }

        /* The Close Button */
        .close {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>

    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>AgriSolutions</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" href="css/style0.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="images/fevicon.png" type="image/gif" />
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
        media="screen">
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>
<!-- body -->

<body class="main-layout">
    <!-- loader  -->
    <div class="loader_bg">
        <div class="loader"><img src="images/loading.gif" alt="#" /></div>
    </div>
    <!-- end loader -->
    <!-- header -->
    <header>
        <!-- header inner -->
        <div class="header">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-3 col-md-3 col-sm-3 col logo_section">
                        <div class="full">
                            <div class="center-desk">
                                <div class="logo">
                                    <!-- <a href="index.html"><img src="images/logo.png" alt="#" /></a> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-9 col-md-9 col-sm-9">
                        <nav class="navigation navbar navbar-expand-md navbar-dark ">
                            <button class="navbar-toggler" type="button" data-toggle="collapse"
                                data-target="#navbarsExample04" aria-controls="navbarsExample04" aria-expanded="false"
                                aria-label="Toggle navigation">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse" id="navbarsExample04">
                                <ul class="navbar-nav mr-auto">
                                    <li class="nav-item">
                                        <a class="nav-link" href="/home">Home</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/profile">Profile</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/weather">Weather</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/cropandfunding">Crop&Funding</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/inquiries">Inquiries</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/about">About</a>
                                    </li>

                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- end header inner -->
    <!-- end header -->
    <!-- banner -->
    <section class="banner_main">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="text-bg">
                        <div class="padding_lert">
                            <h1 style="color: black;">WELCOME TO AGRISOLUTIONS ADVISORY SYSTEM </h1>
                            <h3 style="color: black; font:bolder">We selectively increase production and promote good
                                farming practices in
                                Subsistence farming to ensure food security in the lives of average South Africans.</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end banner -->
    <!-- form_lebal -->

    <!-- end form_lebal -->
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    <section>

        <!-- The Modal -->
        <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <span class="close">&times;</span>

                <h3 class="message"></h3>
                <ul id="crops"></ul>
            </div>

        </div>

        <div class="col-md-6" style="margin: auto;">
            <form id="request" class="main_form">
                <div class="row">
                    <div class="col-md-12 ">
                        <input class="contactus fullNameInput" placeholder="Full Name" type="type" name="full_name">
                    </div>
                    <div class="col-md-12">
                        <input class="contactus ageInput" placeholder="Age" type="type" name="age">
                    </div>
                    <div class="col-md-12">
                        <input class="contactus locationInput" placeholder="Location" type="type" name="location">
                    </div>
                    <div class="col-md-12">
                        <input class="contactus landSizeInput" placeholder="LandSize" type="type" name="land_size">
                    </div>
                    <div class="col-md-12">
                        <input class="contactus soilTypeInput" placeholder="Soil Type" type="type" name="soil_type">
                    </div>
                    <div class="col-md-12">
                        <input class="contactus cropTypeInput" placeholder="Crop Type" type="type" name="crop_type">
                    </div>
                    <div class="col-sm-12">
                        <button type="button" class="send_btn sendBtn">Send</button>
                    </div>
                </div>

            </form>
        </div>
        <h5>Feedback</h5>
        {{#each feed_back}}
        <li>
            <h1>{{this.message}}</h1>
            {{#each this.crops}}
            <ul>
                {{this}}
            </ul>
            {{/each}}
        </li>
        {{/each}}
    </section>

    <!-- Javascript files-->
    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery-3.0.0.min.js"></script>
    <script src="js/plugin.js"></script>
    <!-- sidebar -->
    <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal
        var btn = document.getElementById("myBtn");

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        span.onclick = () => modal.style.display = "none";

        // Elements for the form 
        const fullNameInput = document.querySelector('.fullNameInput');
        const ageInput = document.querySelector('.ageInput');
        const locationInput = document.querySelector('.locationInput');
        const landSizeInput = document.querySelector('.landSizeInput');
        const soilTypeInput = document.querySelector('.soilTypeInput');
        const cropTypeInput = document.querySelector('.cropTypeInput');
        const sendBtn = document.querySelector('.sendBtn');

        const createProfile = async () => {
            console.log('creating profile');
            let body = {
                full_name: fullNameInput.value,
                age: ageInput.value,
                location: locationInput.value,
                land_size: landSizeInput.value,
                soil_type: soilTypeInput.value,
                crop_type: cropTypeInput.value
            }
            await axios.post('/profile/user', body)
                .then(async response => {
                    const data = response.data;
                    // console.log(data)
                    if (data.status) {
                        modal.style.display = "block";
                        //   console.log(data);
                        const message = document.querySelector('.message');
                        const crops = document.querySelector('.crops');
                        const feedBack = document.querySelector('.feedBack');
                        message.innerHTML = data.feedBack[0].message;
                        console.log(data.feedBack[0].crops);
                        let list = document.getElementById('crops');
                        data.feedBack[0].crops.forEach(item => {
                            let li = document.createElement('li');
                            li.innerText = item;
                            list.appendChild(li);
                        });

                    }
                });
        }

        sendBtn.addEventListener('click', () => {
            createProfile();
        });
    </script>
</body>

</html>